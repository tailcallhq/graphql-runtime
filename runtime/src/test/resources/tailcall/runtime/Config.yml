version: 0
server:
  host: jsonplaceholder.typicode.com
  port: 443

endpoints:
  - $http: &posts
    path: /posts
    output:
      item:
        fields:
          - name: id
            schema:
              type: Integer
          - name: userId
            schema:
              type: Integer
          - name: title
            schema:
              type: String
          - name: body
            schema:
              type: String
        type: object
      type: array
  - $http: &users
      path: /users
      output:
        item:
          fields:
            - name: id
              schema:
                type: Integer
            - name: name
              schema:
                type: String
            - name: username
              schema:
                type: String
            - name: email
              schema:
                type: String
            - name: address
              schema:
                fields:
                  - name: street
                    schema:
                      type: String
                  - name: suite
                    schema:
                      type: String
                  - name: city
                    schema:
                      type: String
                  - name: zipcode
                    schema:
                      type: String
                  - name: geo
                    schema:
                      fields:
                        - name: lat
                          schema:
                            type: String
                        - name: lng
                          schema:
                            type: String
                      type: object
                type: object
            - name: company
              schema:
                fields:
                  - name: name
                    schema:
                      type: String
                  - name: catchPhrase
                    schema:
                      type: String
                  - name: bs
                    schema:
                      type: String
                type: object
          type: object
        type: array

  - $http: &postById
      path: /posts/{{postId}}
      output:
        fields:
          - name: id
            schema:
              type: Integer
          - name: userId
            schema:
              type: Integer
          - name: title
            schema:
              type: String
          - name: body
            schema:
              type: String
        type: object

  - $http: &userById
      path: /users/{{id}}
      output:
        fields:
          - name: id
            schema:
              type: Integer
          - name: name
            schema:
              type: String
          - name: username
            schema:
              type: String
          - name: email
            schema:
              type: String
          - name: address
            schema:
              fields:
                - name: street
                  schema:
                    type: String
                - name: suite
                  schema:
                    type: String
                - name: city
                  schema:
                    type: String
                - name: zipcode
                  schema:
                    type: String
                - name: geo
                  schema:
                    fields:
                      - name: lat
                        schema:
                          type: String
                      - name: lng
                        schema:
                          type: String
                    type: object
              type: object
          - name: company
            schema:
              fields:
                - name: name
                  schema:
                    type: String
                - name: catchPhrase
                  schema:
                    type: String
                - name: bs
                  schema:
                    type: String
              type: object
        type: object

  - $http: &userPosts
      path: /users/{{userId}}/posts
      output:
        item:
          fields:
            - name: id
              schema:
                type: Integer
            - name: userId
              schema:
                type: Integer
            - name: title
              schema:
                type: String
            - name: body
              schema:
                type: String
          type: object
        type: array
graphQL:
  schema:
    query: Query
    mutation: Mutation
  types:
    Geo:
      lat:
        type: String
      lng:
        type: String
    Company:
      name:
        type: String
      catchPhrase:
        type: String
      bs:
        type: String
    Address:
      geo:
        type: Geo
      street:
        type: String
      suite:
        type: String
      city:
        type: String
      zipcode:
        type: String
    Query:
      posts:
        type: Post
        isList: true
        steps:
          - *posts
      users:
        type: User
        isList: true
        steps:
          - *users
      post:
        type: Post
        steps:
          - $obj:
            postId: {{args.id}}
          - *postById
        args:
          id:
            type: Int
            isRequired: true
      user:
        type: User
        steps:
          - $obj:
            name: userId
            path: {{args.id}}
          - *userById
        args:
          id:
            type: Int
            isRequired: true
    Post:
      body:
        type: String
      id:
        type: Int
        isRequired: true
      user:
        type: User
        steps:
          - $obj:
              userId: {{value.userId}}
          - *userById
      userId:
        type: Int
        isRequired: true
      title:
        type: String
    User:
      website:
        type: String
      name:
        type: String
        isRequired: true
      posts:
        type: Post
        isList: true
        steps:
          - $obj:
              userId: {{value.id}}
          - *userPosts
      email:
        type: String
        isRequired: true
      username:
        type: String
        isRequired: true
      company:
        type: Company
      id:
        type: Int
        isRequired: true
      address:
        type: Address
      phone:
        type: String