operations:
  - &getUsers:
    type: Http
    method: GET
    path: /users
    output:
      type: User
      list: true
  - &getUserById:
    type: Http
    path: /users/${id}
    output:
      type: User
  - &getPosts:
    type: Http
    path: /posts
    output:
      type: Post
      list: true
  - &getComments:
    type: Http
    path: /comments
    output:
      type: Comment
      list: true
  - &getUserPosts:
    type: Http
    path: /posts?userId=${userId}
    output:
      type: Post
      list: true
  - &getUserComments:
    type: Http
    path: /comments?userId=${userId}
    output:
      type: Comment
      list: true

graphQL:
  Query:
    users:
      operations: *getUsers
    posts:
      operations: *getPosts
    comments:
      operations: *getComments
  User:
    id: Int
    name: String
    email: String
    address: Address
    phone: String
    website: String
    company: Company
    posts:
      operations:
        compose:
          - *getUserPosts
          - applySpec:
              userId:
                prop: id

    comments:
      operations:
        compose:
          - *getUserComments
          - applySpec:
              userId:
                prop: id
    Post:
      id: Int
      userId: Int
      title: String
      body: String
      user:
        operations:
          compose:
            - *getUserById
            - applySpec:
                id:
                  prop: userId
      comments:
        operations:
          compose:
            - *getComments
            - applySpec:
                postId:
                  prop: id
    Address:
      street: String
      suite: String
      city: String
      zipcode: String
      geo:
        type: Geo
    Company:
      name: String
      catchPhrase: String
      bs: String

